{# game_service/templates/game.html #}

{% extends 'base.html' %}

{% block title %}–ò–≥—Ä–æ–≤–∞—è –ø–∞–Ω–µ–ª—å - {{ username }}{% endblock %}

{% block head_extra %}
    {# –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç–∏–ª–∏ –ò–ì–†–û–í–û–ì–û —Å–µ—Ä–≤–∏—Å–∞ #}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/game_styles.css') }}">
    {# –ò–°–ü–†–ê–í–õ–ï–ù–û: –°—Å—ã–ª–∫–∞ –Ω–∞ JS –ò–ì–†–û–í–û–ì–û —Å–µ—Ä–≤–∏—Å–∞ #}
    <script src="{{ url_for('static', filename='js/game.js') }}" defer></script>
{% endblock %}


{# –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã #}
{% block content %}
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É, {{ username }}!</h1>

    <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ -->
    <section class="card">
        <h2>–í–∞—à–∏ —Ä–µ—Å—É—Ä—Å—ã:</h2>
        {% if resources %}
        <ul>
            <li>üå≤ –î–µ—Ä–µ–≤–æ: <span id="wood">{{ resources.wood }}</span></li>
            <li>ü™® –ö–∞–º–µ–Ω—å: <span id="stone">{{ resources.stone }}</span></li>
            <li>üí∞ –ó–æ–ª–æ—Ç–æ: <span id="gold">{{ resources.gold }}</span></li>
        </ul>
        {% else %}
         <p>–î–∞–Ω–Ω—ã–µ –æ —Ä–µ—Å—É—Ä—Å–∞—Ö –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è...</p>
        {% endif %}
    </section>

    <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–¥–∞–Ω–∏–π -->
    {% if buildings %}
    <section class="card">
        <h3>–í–∞—à–∏ –∑–¥–∞–Ω–∏—è:</h3>
        <ul>
            <li>üè° –õ–µ—Å–æ–ø–∏–ª–∫–∞ (–£—Ä–æ–≤–µ–Ω—å <span id="sawmill">{{ buildings.sawmill_level }}</span>)</li>
            <li>üèó –ö–∞–º–µ–Ω–æ–ª–æ–º–Ω—è (–£—Ä–æ–≤–µ–Ω—å <span id="quarry">{{ buildings.quarry_level }}</span>)</li>
            <li>‚õè –ó–æ–ª–æ—Ç–æ–π —Ä—É–¥–Ω–∏–∫ (–£—Ä–æ–≤–µ–Ω—å <span id="mine">{{ buildings.mine_level }}</span>)</li>
        </ul>
    </section>
    {% else %}
    <section class="card">
         <p>–î–∞–Ω–Ω—ã–µ –æ –∑–¥–∞–Ω–∏—è—Ö –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è...</p>
    </section>
    {% endif %}

    <!-- –°–±–æ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤ -->
    <section class="card">
        <h3>–°–±–æ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤</h3>
        <form action="{{ url_for('game_bp.collect_resources') }}" method="POST">
             <input type="hidden" name="token" value="{{ token }}">
             <button type="submit" {% if not can_collect %}disabled title="–°–æ–±–∏—Ä–∞—Ç—å –º–æ–∂–Ω–æ —Ä–∞–∑ –≤ —á–∞—Å"{% endif %}>–°–æ–±—Ä–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã</button>
        </form>
        {% if not can_collect %}
         <p><small>(–°–æ–±–∏—Ä–∞—Ç—å –º–æ–∂–Ω–æ —Ä–∞–∑ –≤ —á–∞—Å)</small></p>
        {% endif %}
    </section>

    <!-- –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∑–¥–∞–Ω–∏–π -->
    {% if buildings %}
    <section class="card building-buttons">
        <h3>–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∑–¥–∞–Ω–∏–π</h3>
        <form action="{{ url_for('game_bp.build_building', building_type='sawmill') }}" method="POST">
             <input type="hidden" name="token" value="{{ token }}">
            <button type="submit">–£–ª—É—á—à–∏—Ç—å –ª–µ—Å–æ–ø–∏–ª–∫—É (–£—Ä. {{ buildings.sawmill_level }})</button>
        </form>
        <form action="{{ url_for('game_bp.build_building', building_type='quarry') }}" method="POST">
             <input type="hidden" name="token" value="{{ token }}">
            <button type="submit">–£–ª—É—á—à–∏—Ç—å –∫–∞–º–µ–Ω–æ–ª–æ–º–Ω—é (–£—Ä. {{ buildings.quarry_level }})</button>
        </form>
        <form action="{{ url_for('game_bp.build_building', building_type='mine') }}" method="POST">
             <input type="hidden" name="token" value="{{ token }}">
            <button type="submit">–£–ª—É—á—à–∏—Ç—å —Ä—É–¥–Ω–∏–∫ (–£—Ä. {{ buildings.mine_level }})</button>
        </form>
    </section>
    {% endif %}

    <br>
    <!-- –í—ã—Ö–æ–¥ -->
    <div class="logout">
        <a href="{{ url_for('game_bp.logout') }}"><button>–í—ã–π—Ç–∏</button></a>
    </div>
{% endblock %} {# –ó–∞–∫—Ä—ã–≤–∞–µ–º –±–ª–æ–∫ content #}


